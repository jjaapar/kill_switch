# Door Sensor Configuration File
# Place this file at: /etc/door_sensor/config.ini

[gpio]
# GPIO pin number (BCM numbering) connected to door sensor
sensor_pin = 17

# Use internal pull-up resistor (true) or pull-down (false)
pull_up = true

[ssh]
# Remote host to send commands to
host = 192.168.1.100

# SSH port (standard is 22)
port = 22

# Path to SSH private key file
key_path = /home/user_name/.ssh/id_ecdsa

# SSH connection timeout in seconds
timeout = 10

[commands]
# Command to run when door opens (after delay)
door_open = echo "Door opened at $(date)" >> /tmp/door_log.txt

# Command to run immediately when door closes
door_closed = echo "Door closed at $(date)" >> /tmp/door_log.txt

[monitoring]
# How often to check door sensor (seconds)
check_delay = 0.5

# Debounce delay to prevent false triggers (seconds)
debounce_delay = 1.0

# How long to wait before sending door open alert (seconds)
# Set to 0 for immediate alerts
open_alert_delay = 10.0

# Maintenance Mode:
# - Create file: echo "ACTIVE" > /tmp/state (normal operation)
# - Create file: echo "MAINT" > /tmp/state (maintenance mode - no SSH commands)
# - Delete file or invalid content defaults to ACTIVE mode
# How often to check maintenance mode file (seconds)
maintenance_check_interval = 30

[paths]
# File to store persistent state
state_file = /var/lib/door_sensor/state.json

# Log file location
log_file = /var/log/door_sensor.log

# PID file for single instance checking
pid_file = /var/run/door_sensor/door_sensor.pid

# Maintenance mode file (ACTIVE or MAINT)
maintenance_file = /tmp/state

[logging]
# Maximum log file size before rotation (bytes)
# 1048576 = 1MB, 10485760 = 10MB
max_file_size = 1048576

# Number of old log files to keep
backup_count = 3

# Maintenance Mode:
# - Create file: echo "ACTIVE" > /tmp/state (normal operation)
# - Create file: echo "MAINT" > /tmp/state (maintenance mode - no SSH commands)
# - Delete file or invalid content defaults to ACTIVE mode
